<!DOCTYPE html>
<html>
<head>
    <title>nglarily</title>
    <meta name="keywords" content="javascript, angularjs, jquery, html5, css3, template"/>
    <meta name="description" content="A sample angularjs app."/>
    <meta charset="utf-8">

    <link href="css/lib/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.min.js"></script>

</head>

<body ng-app="nglarily"> 
<div id=“current-page” ui-view>
    <!—pages are rendered here-->
</div>
</body>

<script>
    var logError = function(err){console.err(err);},
            app = angular.module("nglarily", ['ui.router']);

    app.config(["$stateProvider", function ($stateProvider) {
        $stateProvider
                .state("home-page", {
                    url: "",
                    templateUrl: "pages/home.html",
                    controller: ["$scope", "ApiService", function ($scope, ApiService) {
                        var success = function(guide){
                            $scope.guide    = guide;
                            $scope.tutorials = guide.tutorials

                        };
                        ApiService.getAngularGuide(success, logError);

                    }]
                })
                .state("tutorial", {
                    url: "/tutorials/:name",
                    templateUrl: "pages/tutorial.html"
                })
                .state("tutorial.step", {
                    url: "/tutorial/:tutorial/step/:step",
                    templateUrl: "pages/step.html"
                });
    }]);

    app.factory("ApiService", ["$http", function ($http) {
        var service = {};
        service.getAngularGuide = function(success, error){
            $http.get("api/angular-book.json").then( function(response){
                success(response.data);
            }, error);
        };
        return service;

    }]);
</script>

</html>


